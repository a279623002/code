<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        window.addEventListener('load', function(e) {
            let ws
            let output = document.getElementById('output')
            let intput = document.getElementById('intput')
            let print = function (msg) {
                let d = document.createElement('div')
                d.innerText = msg
                output.appendChild(d)
            }
            document.getElementById('open').onclick = function (e) {
                ws = new WebSocket('ws://localhost:7777/ws')
                ws.onmessage = function (e) {
                    print("receive: " + e.data)
                }
                print('open websocket')
                return false
            }
            document.getElementById('send').onclick = function (e) {
                if (!ws) {
                    return false
                }
                print('send: ' + input.value)
                ws.send(input.value)
                return false
            }
            document.getElementById('close').onclick = function (e) {
                if(!ws) {
                    return false
                }
                ws.close()
                return false
            }
        })

    </script>
</head>
<body>
<table>
    <tr>
        <td valign="top" width="50%">
            <p>Click "Open" to create a connection to the server,
                "Send" to send a message to the server and "Close" to close the connection.
                You can change the message and send multiple times.
            </p>
            <form>
                <button id="open">Open</button>
                <button id="close">Close</button>
                <input id="input" type="text" value="Hello world!">
                <button id="send">Send</button>
            </form>
        </td>
        <td valign="top" width="50%">
            <div id="output"></div>
        </td>
    </tr>
</table>
</body>
</html>